# ТЗ: Telegram-бот для 360‑градусного фидбэка

## 0. Цель
Автоматизировать сбор 360‑фидбэка в Telegram: ≤ 5 параллельных циклов, фиксированная анкета (оценки 0–3 + открытые вопросы), хранение данных в Google Sheets, напоминания, ежедневная HR‑сводка и итоговый отчёт.

---

## 1. Роли
| Роль | Возможности |
|------|-------------|
| **HR‑админ** | `/new_cycle`, `/cancel`, `/status`; получает сводки и отчёты |
| **Респондент** | Заполняет назначенные анкеты |
| **Бот** | Реализует все функции ниже |

---

## 2. Справочник сотрудников
* Google Sheets → таблица **`Employees`** (корп. аккаунт).  
* Колонки (фиксированы): `Employee_ID`, `Full_Name`, `Telegram_ID`, `Position`, `Manager_ID`.

---

## 3. Cycle Management
| Шаг | Детали |
|-----|--------|
| **Создание** | `/new_cycle` → HR вводит `Target`, `Respondent_IDs[]`, `Deadline`.<br>Проверяется лимит ≤ 5 активных циклов. |
| **Cycle ID** | Формат `YYYYMMDD_<TargetEmployeeID>` (напр. `20250622_EMP123`). |
| **Отмена** | `/cancel <Cycle_ID>` переводит цикл в `Closed` без отчёта. |

---

## 4. Анкета (фиксированная)

| № | Тип | Вопрос / подпись | Варианты / подсказки |
|----|-----|-----------------|----------------------|
| **Оценка компетенций 0-3** |
| 1  | scale 0-3 | **Ориентация на результат [Ownership]** | 0 — «выполняет обязательный минимум» … 3 — «достигает целевой результат, учитывая влияние на другие процессы» |
| 2  | input:text | Пример, как проявлялась/отсутствовала «Ownership» | Развёрнутый ответ |
| 3  | scale 0-3 | **Ориентация на потребности клиента** | 0 — «не учитывает нужды клиента» … 3 — «предвосхищает потребности» |
| 4  | input:text | Пример по «Ориентация на потребности клиента» | — |
| 5  | scale 0-3 | **Ведение переговоров** | 0 — «чаще не достигает целей» … 3 — «win-win» |
| 6  | input:text | Пример по «Ведение переговоров» | — |
| 7  | scale 0-3 | **Управление конфликтами** | 0 — «уходит в неконструктив» … 3 — «находит решение» |
| 8  | input:text | Пример по «Управление конфликтами» | — |
| 9  | scale 0-3 | **Определение приоритетов** | 0 — «теряет фокус» … 3 — «правильно расставляет приоритеты команды» |
| 10 | input:text | Пример по «Определение приоритетов» | — |
| 11 | scale 0-3 | **Формирование эффективных команд** | 0 — «не работает как с командой» … 3 — «формирует эффективные команды» |
| 12 | input:text | Пример по «Формирование команд» | — |
| 13 | scale 0-3 | **Воспроизводство практики и развитие команды** | 0 — «тормозит развитие» … 3 — «даёт челленджевые задачи, помогает расти» |
| 14 | input:text | Пример по «Развитие команды» | — |
| 15 | scale 0-3 | **Умение действовать в неопределённости и решать проблемы** | 0 — «действует по шаблону, сопротивляется изменениям» … 3 — «инициирует изменения, решает критичные проблемы» |
| 16 | input:text | Пример по «Умение решать проблемы» | — |
| **Обратная связь по соответствию роли** |
| 17 | radio: yes/no/unknown | Соответствует ли <Имя> своей экспертизе и роли? | «Да / Нет / Не понимаю зону ответственности» |
| **Ключевые выводы** |
| 18 | input:text (обяз.) | Блокеры / несоответствия позиции | Развёрнутый ответ |
| 19 | input:text (обяз.) | Сильные стороны | Развёрнутый ответ |
| **Комфорт взаимодействия** |
| 20 | checkbox[] | Комфортно ли тебе работать с <Имя>? Отметь пункты | Коммуникация / Гибкость / Ответственность / Открытость / Командность |
| 21 | input:text | Дополнительные комментарии | По желанию |
| **Завершение** |
| 22 | input:text | Дополнительные предложения и пожелания | «Спасибо за твоё время и фидбек ❤️» |

*Шкала 0-3*: **0 — не проявляется · 1 — редко · 2 — нормальный уровень · 3 — выдающийся**  
Все поля с `(обяз.)` должны быть заполнены перед «Отправить».


---

## 5. Процесс респондента
1. Получает ссылку `t.me/bot?start=<CycleID_Random>`.  
2. Заполняет анкету на коллегу.  
3. Пока не нажал «Отправить», другая анкета не выдаётся.  
4. После сабмита:  
   * есть ещё задания → новая ссылка;  
   * иначе → «Спасибо, опросы закончились».

---

## 6. Хранение данных
* **Один лист = один цикл**; имя `YYYY-MM-DD_TargetName`.  
* Строка = ответ: `Cycle_ID`, `Respondent_ID`, `Submitted_at`, `Q1…Q8`, `Strengths`, `Growth`.  
* **Append‑only.** Авто‑архив не нужен.

---

## 7. Таймеры (МСК)
| Событие | Время / период |
|---------|----------------|
| HR‑сводка | 09:00 ежедневно |
| Напоминание | Каждые 3 дня |
| Финальный пинг | 2 дня до `Deadline` |

---

## 8. HR‑сводка (пример)
```
Цикл: Иванова А.
Готово 4/7 (57 %), дедлайн через 5 дн
 • Иванов — ✅
 • Петров — ⏳
 ...
```

---

## 9. Отчёт (`Reported`)
1. **Markdown‑сообщение**  
   * средние 0–3 по 8 компетенциям (1 знак после запятой);  
   * буллет «сильное / точка роста» на каждую;  
   * общие сильные стороны / зоны роста (3–5 пунктов);  
   * анонимные цитаты → отбор: длина > 20 символов → GPT‑оценка информативности 0–10 → включаем > 6.  
2. **CSV‑ссылка** — прямой export листа Google Sheets.  
3. Список «не заполнил».

---

## 10. Алгоритмы и ограничения
| Пункт | Значение |
|-------|----------|
| Параллельность циклов | ≤ 5 |
| Минимум N | Нет, считаем всегда |
| Ошибки Google API | Логируем в stdout; без алертов/ретраев |
| Права бота | `spreadsheets.readonly` + `spreadsheets.append` |
| Язык | Весь UI и отчёты — русский |

---

## 11. Команды HR
```
/new_cycle
/cancel <Cycle_ID>
/status
```
